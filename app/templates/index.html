{{ define "content" }}
<div class="container">
    <!-- Hero Section with Material Design Card -->
    <div class="mdc-card hero-card mdc-elevation--z4">
        <div class="mdc-card__primary">
            <h2 class="mdc-typography--headline4">Transform Your Ingredients into Delicious Recipes</h2>
            <p class="mdc-typography--body1">Enter the ingredients you have, and let Big Papi create the perfect recipe
                for you!</p>
        </div>
    </div>

    <!-- Recipe Form with Material Design Components -->
    <div class="mdc-card form-card mdc-elevation--z2">
        <form id="recipeForm" class="recipe-form">
            <!-- Ingredients Text Field -->
            <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--textarea mdc-text-field--fullwidth"
                data-mdc-auto-init="MDCTextField">
                <textarea id="ingredients" name="ingredients" class="mdc-text-field__input" rows="4"
                    aria-labelledby="ingredients-label" required></textarea>
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label class="mdc-floating-label" id="ingredients-label" for="ingredients">Available Ingredients
                            *</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            <div class="mdc-text-field-helper-line">
                <div class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent">
                    Enter ingredients separated by commas (min 1, max 20)
                </div>
            </div>
            <div id="ingredientsFeedback" class="feedback"></div>

            <div class="form-row">
                <!-- Dietary Restrictions Select -->
                <div class="select-wrapper">
                    <label class="select-label" for="dietary_restrictions">Dietary Restrictions</label>
                    <div class="select-container">
                        <select id="dietary_restrictions" name="dietary_restrictions" class="material-select">
                            <option value="" selected>None</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="vegan">Vegan</option>
                            <option value="gluten-free">Gluten-Free</option>
                            <option value="dairy-free">Dairy-Free</option>
                            <option value="keto">Keto</option>
                            <option value="paleo">Paleo</option>
                            <option value="low-carb">Low-Carb</option>
                            <option value="nut-free">Nut-Free</option>
                        </select>
                        <i class="material-icons select-icon">arrow_drop_down</i>
                    </div>
                </div>

                <!-- Cuisine Preference Select -->
                <div class="select-wrapper">
                    <label class="select-label" for="cuisine_preference">Cuisine Preference</label>
                    <div class="select-container">
                        <select id="cuisine_preference" name="cuisine_preference" class="material-select">
                            <option value="" selected>Any Cuisine</option>
                            <option value="italian">Italian</option>
                            <option value="mexican">Mexican</option>
                            <option value="chinese">Chinese</option>
                            <option value="indian">Indian</option>
                            <option value="japanese">Japanese</option>
                            <option value="thai">Thai</option>
                            <option value="mediterranean">Mediterranean</option>
                            <option value="american">American</option>
                            <option value="french">French</option>
                            <option value="korean">Korean</option>
                        </select>
                        <i class="material-icons select-icon">arrow_drop_down</i>
                    </div>
                </div>

                <!-- Serving Size -->
                <div class="mdc-text-field mdc-text-field--outlined" data-mdc-auto-init="MDCTextField">
                    <input type="number" id="serving_size" name="serving_size" class="mdc-text-field__input" min="1"
                        max="12" value="4">
                    <div class="mdc-notched-outline">
                        <div class="mdc-notched-outline__leading"></div>
                        <div class="mdc-notched-outline__notch">
                            <label class="mdc-floating-label" for="serving_size">Serving Size</label>
                        </div>
                        <div class="mdc-notched-outline__trailing"></div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="form-actions">
                <button type="button" id="validateBtn" class="mdc-button mdc-button--outlined">
                    <span class="mdc-button__ripple"></span>
                    <i class="material-icons mdc-button__icon" aria-hidden="true">check_circle</i>
                    <span class="mdc-button__label">Validate Ingredients</span>
                </button>
                <button type="submit" id="generateBtn" class="mdc-button mdc-button--raised">
                    <span class="mdc-button__ripple"></span>
                    <i class="material-icons mdc-button__icon" aria-hidden="true">restaurant</i>
                    <span class="mdc-button__label">Generate Recipe</span>
                </button>
            </div>
        </form>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="mdc-card loading-card mdc-elevation--z2" style="display: none;">
        <div class="loading-content">
            <div class="mdc-circular-progress mdc-circular-progress--indeterminate"
                data-mdc-auto-init="MDCCircularProgress">
                <div class="mdc-circular-progress__determinate-container">
                    <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 48 48"
                        xmlns="http://www.w3.org/2000/svg">
                        <circle class="mdc-circular-progress__determinate-track" cx="24" cy="24" r="18"
                            stroke-width="4" />
                        <circle class="mdc-circular-progress__determinate-circle" cx="24" cy="24" r="18"
                            stroke-dasharray="113.097" stroke-dashoffset="113.097" stroke-width="4" />
                    </svg>
                </div>
                <div class="mdc-circular-progress__indeterminate-container">
                    <div class="mdc-circular-progress__spinner-layer">
                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left">
                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"
                                    stroke-width="4" />
                            </svg>
                        </div>
                        <div class="mdc-circular-progress__gap-patch">
                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"
                                    stroke-width="3.2" />
                            </svg>
                        </div>
                        <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right">
                            <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549"
                                    stroke-width="4" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
            <p class="mdc-typography--body1">Creating your perfect recipe...</p>
        </div>
    </div>

    <!-- Recipe Result Card -->
    <div id="recipeResult" class="mdc-card recipe-card mdc-elevation--z2" style="display: none;">
        <div class="recipe-header">
            <h3 class="mdc-typography--headline5">Your Generated Recipe</h3>
            <div class="recipe-actions">
                <button onclick="saveRecipe()" class="mdc-icon-button material-icons" title="Save Recipe">
                    save
                </button>
                <button onclick="editRecipe()" class="mdc-icon-button material-icons" title="Edit Recipe" style="display: none;" id="editRecipeBtn">
                    edit
                </button>
                <button onclick="exportRecipe('txt')" class="mdc-icon-button material-icons" title="Export as Text">
                    description
                </button>
                <button onclick="exportRecipe('json')" class="mdc-icon-button material-icons" title="Export as JSON">
                    code
                </button>
                <button onclick="copyRecipe()" class="mdc-icon-button material-icons" title="Copy to Clipboard">
                    content_copy
                </button>
            </div>
        </div>
        <div id="recipeContent" class="recipe-content mdc-typography--body1"></div>
        <div id="recipeMeta" class="recipe-meta"></div>
        <div id="recipeRating" class="recipe-rating" style="display: none;">
            <h4 class="mdc-typography--headline6">Rate this Recipe</h4>
            <div class="star-rating-interactive">
                <i class="material-icons star-interactive" data-rating="1">star_border</i>
                <i class="material-icons star-interactive" data-rating="2">star_border</i>
                <i class="material-icons star-interactive" data-rating="3">star_border</i>
                <i class="material-icons star-interactive" data-rating="4">star_border</i>
                <i class="material-icons star-interactive" data-rating="5">star_border</i>
            </div>
            <div id="ratingMessage" class="rating-message"></div>
        </div>
    </div>

    <!-- Saved Recipes Section -->
    <div class="mdc-card saved-recipes-card mdc-elevation--z2">
        <div class="recipe-header">
            <h3 class="mdc-typography--headline5">Saved Recipes</h3>
            <div class="recipe-actions">
                <button onclick="loadSavedRecipes()" class="mdc-button mdc-button--outlined">
                    <span class="mdc-button__ripple"></span>
                    <i class="material-icons mdc-button__icon" aria-hidden="true">refresh</i>
                    <span class="mdc-button__label">Load All</span>
                </button>
            </div>
        </div>
        
        <!-- Search Bar -->
        <div class="search-container">
            <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-leading-icon mdc-text-field--fullwidth" data-mdc-auto-init="MDCTextField">
                <i class="material-icons mdc-text-field__icon mdc-text-field__icon--leading">search</i>
                <input class="mdc-text-field__input" type="text" id="recipeSearch" placeholder="Search recipes by name or ingredients...">
                <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                        <label for="recipeSearch" class="mdc-floating-label">Search recipes</label>
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                </div>
            </div>
            
            <!-- Star Rating Filter -->
            <div class="filter-container">
                <label class="filter-label">Filter by rating:</label>
                <div class="star-filter">
                    <button class="star-filter-btn" data-rating="4">4★+</button>
                    <button class="star-filter-btn" data-rating="5">5★</button>
                </div>
            </div>
        </div>
        
        <div id="savedRecipesList" class="saved-recipes-list">
            <div class="loading-message">Start typing to search recipes, or click "Load All" to see all saved recipes</div>
        </div>
    </div>

    <!-- Edit Recipe Modal -->
    <div id="editRecipeModal" class="edit-modal" style="display: none;">
        <div class="edit-modal-backdrop" onclick="closeEditModal()"></div>
        <div class="edit-modal-content mdc-card mdc-elevation--z8">
            <div class="edit-modal-header">
                <h3 class="mdc-typography--headline5">Edit Recipe</h3>
                <button onclick="closeEditModal()" class="mdc-icon-button material-icons">
                    close
                </button>
            </div>
            <div class="edit-modal-body">
                <!-- Recipe Content -->
                <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--textarea mdc-text-field--fullwidth" data-mdc-auto-init="MDCTextField">
                    <textarea id="editRecipeContent" class="mdc-text-field__input" rows="15" aria-labelledby="edit-recipe-content-label"></textarea>
                    <div class="mdc-notched-outline">
                        <div class="mdc-notched-outline__leading"></div>
                        <div class="mdc-notched-outline__notch">
                            <label class="mdc-floating-label" id="edit-recipe-content-label" for="editRecipeContent">Recipe Content</label>
                        </div>
                        <div class="mdc-notched-outline__trailing"></div>
                    </div>
                </div>

                <!-- Ingredients Used -->
                <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--textarea mdc-text-field--fullwidth" data-mdc-auto-init="MDCTextField" style="margin-top: 16px;">
                    <textarea id="editIngredientsUsed" class="mdc-text-field__input" rows="3" aria-labelledby="edit-ingredients-label"></textarea>
                    <div class="mdc-notched-outline">
                        <div class="mdc-notched-outline__leading"></div>
                        <div class="mdc-notched-outline__notch">
                            <label class="mdc-floating-label" id="edit-ingredients-label" for="editIngredientsUsed">Ingredients Used</label>
                        </div>
                        <div class="mdc-notched-outline__trailing"></div>
                    </div>
                </div>

                <!-- Form Row for other fields -->
                <div class="form-row" style="margin-top: 16px;">
                    <!-- Dietary Restrictions -->
                    <div class="select-wrapper">
                        <label class="select-label" for="editDietaryRestrictions">Dietary Restrictions</label>
                        <div class="select-container">
                            <select id="editDietaryRestrictions" class="material-select">
                                <option value="">None</option>
                                <option value="vegetarian">Vegetarian</option>
                                <option value="vegan">Vegan</option>
                                <option value="gluten-free">Gluten-Free</option>
                                <option value="dairy-free">Dairy-Free</option>
                                <option value="keto">Keto</option>
                                <option value="paleo">Paleo</option>
                                <option value="low-carb">Low-Carb</option>
                                <option value="nut-free">Nut-Free</option>
                            </select>
                            <i class="material-icons select-icon">arrow_drop_down</i>
                        </div>
                    </div>

                    <!-- Cuisine Preference -->
                    <div class="select-wrapper">
                        <label class="select-label" for="editCuisinePreference">Cuisine Preference</label>
                        <div class="select-container">
                            <select id="editCuisinePreference" class="material-select">
                                <option value="">Any Cuisine</option>
                                <option value="italian">Italian</option>
                                <option value="mexican">Mexican</option>
                                <option value="chinese">Chinese</option>
                                <option value="indian">Indian</option>
                                <option value="japanese">Japanese</option>
                                <option value="thai">Thai</option>
                                <option value="mediterranean">Mediterranean</option>
                                <option value="american">American</option>
                                <option value="french">French</option>
                                <option value="korean">Korean</option>
                            </select>
                            <i class="material-icons select-icon">arrow_drop_down</i>
                        </div>
                    </div>

                    <!-- Serving Size -->
                    <div class="mdc-text-field mdc-text-field--outlined" data-mdc-auto-init="MDCTextField">
                        <input type="number" id="editServingSize" class="mdc-text-field__input" min="1" max="12" value="4">
                        <div class="mdc-notched-outline">
                            <div class="mdc-notched-outline__leading"></div>
                            <div class="mdc-notched-outline__notch">
                                <label class="mdc-floating-label" for="editServingSize">Serving Size</label>
                            </div>
                            <div class="mdc-notched-outline__trailing"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="edit-modal-footer">
                <button onclick="closeEditModal()" class="mdc-button mdc-button--outlined">
                    <span class="mdc-button__ripple"></span>
                    <span class="mdc-button__label">Cancel</span>
                </button>
                <button onclick="saveEditedRecipe()" class="mdc-button mdc-button--raised">
                    <span class="mdc-button__ripple"></span>
                    <i class="material-icons mdc-button__icon" aria-hidden="true">save</i>
                    <span class="mdc-button__label">Save Changes</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Error Snackbar -->
    <div id="errorContainer" class="mdc-snackbar" data-mdc-auto-init="MDCSnackbar">
        <div class="mdc-snackbar__surface">
            <div class="mdc-snackbar__label" id="errorMessage"></div>
            <div class="mdc-snackbar__actions">
                <button type="button" class="mdc-icon-button mdc-snackbar__dismiss material-icons">close</button>
            </div>
        </div>
    </div>

    <!-- Success Snackbar -->
    <div id="successMessage" class="mdc-snackbar" data-mdc-auto-init="MDCSnackbar">
        <div class="mdc-snackbar__surface">
            <div class="mdc-snackbar__label" id="successText"></div>
        </div>
    </div>
</div>
{{ end }}

{{ define "scripts" }}
<script>
    // Re-initialize MDC components after DOM update
    document.addEventListener('DOMContentLoaded', function () {
        mdc.autoInit();
    });
</script>
{{ end }}

{{ template "base" . }}